
 ▐▛███▜▌   Claude Code v2.0.33
▝▜█████▛▘  Sonnet 4.5 · Claude Max
  ▘▘ ▝▝    /home/mikewright/Development/setup/nixvim

> Add a new keyboard shortcut <leader>as that shows which of the agents is currently selected for the open session. 

● I'll help you add a keyboard shortcut <leader>as to show which agent is currently selected. Let me first explore the codebase to understand how agents are managed and how keyboard shortcuts are configured.

● Explore(Find agent configuration code)
  ⎿  Done (22 tool uses · 34.5k tokens · 48.5s)                                                                                                                                                                                                                                                                                                                                                                                      

● I can see that <leader>as is already used in visual mode to send selection to the agent. However, I can add it for normal mode to show which agent is currently selected. Let me create this functionality:

● Read(options/ai/agent.nix)
  ⎿  Read 30 lines

● Now let me look at how to implement the show current agent function. I'll need to add it before the keymaps section:

● Read(options/ai/agent.nix)
  ⎿  Read 30 lines

● Perfect! Now I'll add a function to show the current agent and add the keymap. Let me insert the new function after show_agent_picker:

● Update(options/ai/agent.nix)
  ⎿  Updated options/ai/agent.nix with 7 additions                                                                                                 
       115          end)
       116        end
       117    
       118 +      -- Function to show current agent
       119 +      local function show_current_agent()
       120 +        local agent = get_current_agent()
       121 +        local cwd = vim.fn.getcwd()
       122 +        vim.notify("Current AI Agent: " .. agent.name .. " (" .. current_agent .. ")\nWorking Directory: " .. cwd, vim.log.levels.INFO)
       123 +      end
       124 +  
       125        -- Get current agent config
       126        local function get_current_agent()
       127          return AI_AGENTS[current_agent]

● Now I need to add the keymap for <leader>as in normal mode. Since it's already used in visual mode, I'll add it as a normal mode keymap:

● Update(options/ai/agent.nix)
  ⎿  Updated options/ai/agent.nix with 1 addition                                                    
       603        keymapd("<leader>ac", "Clear AI agent terminal screen", clear_agent_terminal)
       604        keymapd("<leader>ah", "Send /help to AI agent", send_agent_help)
       605        keymapd("<leader>ae", "Exit AI agent terminal", exit_agent)
       606 +      keymapd("<leader>as", "Show current AI agent", show_current_agent)
       607        vkeymapd("<leader>as", "Send selection to AI agent", send_selection_to_agent)
       608        keymapd("<leader>af", "Send current file path to AI agent", send_filepath_to_agent)
       609        keymapd("<leader>ai", "Interrupt AI agent command (Ctrl-C)", interrupt_agent)

● Perfect! I've added the new keyboard shortcut <leader>as for normal mode that will show which agent is currently selected. Here's what I did:

  Changes Made

  1. Added new function show_current_agent() at line 118-123 in /home/mikewright/Development/setup/nixvim/options/ai/agent.nix
    - Retrieves the current agent configuration
    - Shows the agent name, key, and current working directory
    - Uses vim.notify() to display an info notification
  2. Added keymap at line 606:
    - <leader>as in normal mode → "Show current AI agent"
    - The visual mode binding for <leader>as remains unchanged (sends selection to agent)

  How It Works

  When you press <leader>as in normal mode, you'll see a notification displaying:
  - The current AI agent name (e.g., "Claude Code" or "Copilot CLI")
  - The agent key (e.g., "claude" or "copilot")
  - The current working directory

  This is useful because agents are configured per-directory, so you can quickly see which agent is active for your current session.

  To apply these changes, you'll need to rebuild your nixvim configuration.



